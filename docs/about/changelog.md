# 更新日志

## 版本说明

!!! warning ""
    KubeOperator 版本号命名规则为: v大版本.功能版本.Bug修复版本

!!! info "例如"
    * v3.0.1 是 v3.0.0 之后的Bug修复版本
    * v3.1.0 是 v3.0.0 之后的功能版本
    * 像其它优秀开源项目一样，KubeOperator 将每月发布一个功能版本，并同时维护 3 个功能版本。比如:

!!! info "例如"
    * 在 v3.3 发布前，我们会同时维护 v3.0、v3.1、v3.2
    * 在 v3.3 发布后，我们会同时维护 v3.1、v3.2、v3.3；v3.0 会停止维护

## v3.5.1
------------------------
2021年2月5日

!!! info "支持 k8s 版本"
支持的 k8s 版本是 1.18.15

!!! info "新增功能"
- 支持集群工具升级；
- 支持多级加密；
- 集群部署支持自定义配置 yum 仓库；

!!! summary "功能优化"
- 支持集群强制删除；
- 支持存储卷和存储类删除；
- 主机批量导入功能优化；
- 集群添加节点功能优化；
- 创建存储类功能优化；
- 创建存储提供商任务状态实时同步；
- 网络插件安装提示信息国际化；
- 调用 kubernetes api 等操作添加到系统日志；
- 配置文件中密文存储工作密钥和密码；

## v3.5.0
------------------------
2021年1月15日

!!! info "支持 k8s 版本"
支持的 k8s 版本是 1.18.14 和 1.18.12

!!! info "新增功能"
- 支持集群异常状态诊断及修复；
- 支持 Istio v1.8.0；
- 自动模式创建主机支持 IP 池；
- 支持自定义 Ansible 任务超时时间和并发参数；
- 版本管理支持上传 K8s 离线包；
- 支持 Grafana。

!!! summary "功能优化"
- 优化 K8s 集群的升级流程；
- 优化 K8s 集群创建时的选项；
- 优化用户密码加密方式；
- 优化集群 Namespace 的删除操作；
- 优化集群安装、升级时错误信息的显示；
- vSphere 模版支持多磁盘；
- 创建可用区时，vSphere Datastore 支持多选。

!!! summary "组件更新"
- k8s: v1.18.14
- etcd: v3.4.14
- containerd: 1.4.3

## v3.4.2
------------------------
2020年12月28日

!!! info "支持 k8s 版本"
支持的 k8s 版本是 1.18.10 和 1.18.12

!!! info "功能优化"
- 手动模式卸载集群时支持重试、查看日志；
- 优化新增用户密码强度校验；
- 优化 ansible 任务执行脚本；
- 支持 PasswordAuthentication 为 no 的 ssh 认证方式；

!!! success "Bug 修复"
- 解决了集群节点操作系统为 CentOS7.4 时，集群安装失败的问题；
- 解决了 FusionCompute 创建虚机失败的问题；
- 解决了 ssh 到安装有 helm3 的 master 节点提示 Warning 信息的问题；
- 解决了 arm64 离线包缺失 registry 镜像的问题；

## v3.4.1
------------------------
2020年12月16日

!!! info "支持 k8s 版本"
    支持的 k8s 版本是 1.18.10 和 1.18.12

!!! info "新增功能"
    - 用户可自定义配置执行任务超时时间；
    - 优化了容器运行时 systemd 参数配置；

!!! success "Bug 修复"
    - 解决了多集群管理任务同步失败的问题；
    - 解决了用户登录前后 ksessionid 未改变等安全问题；

## v3.4.0
------------------------
2020年12月10日

!!! info "支持 k8s 版本"
    支持的 k8s 版本是 1.18.10 和 1.18.12

!!! info "新增功能"
    - 多集群管理（X-Pack）；
    - GPU 支持；
    - 系统操作日志；
    - 集群日志支持 Loki；
    - 集群备份支持 SFTP；
    - 批量导入主机；
    - 忘记密码；
    - FusionCompute 支持默认模版；
    - 应用商店增加 Kuboard、TensorFlow；

!!! summary "功能优化"
    - 主机、备份账号页面可以直接授权到项目；
    - arm64 集群支持 chartmuseum；
    - 启用工具支持选择 namespace 和 node 节点；
    - 手动模式状态为 Failed 的集群，删除操作时触发集群卸载脚本；
    - 集群日志终端增加停止、开启按钮；
    - 格式化显示创建集群错误信息；
    - 优化集群脚本默认并发数量；
    - 优化日期控件；
    - 优化用户密码、用户邮箱等敏感数据显示方式；
    - 上传文件控件国际化；
    - 优化工具部署超时时间；
    - 工具卸载时状态重置为销毁中；
    - 优化文档、Rest Api等页面跳转方式；
    - 优化集群创建时默认网络参数；

!!! summary "组件更新"
    - k8s: v1.18.10, v1.18.12
    - containerd: 1.4.1
    - coredns: 1.8.0
    - flannel: v0.13.0
    - calico: v3.16.5
    - helm_v2: v2.17.0
    - helm_v3: v3.4.1

## v3.3.1
------------------------
2020年11月20日

!!! info "支持 k8s 版本"
    支持的 k8s 版本是 1.18.8 和 1.18.10

!!! success "Bug 修复"
    - 修复了升级后，原集群没有日志工具的问题
    - 修复了自动模式创建集群删除失败的问题

## v3.3.0
------------------------
2020年11月12日

!!! info "支持 k8s 版本"
    支持的 k8s 版本是 1.18.8 和 1.18.10

!!! info "新增功能"
    - FusionCompute 支持自动部署模式
    - 持久化存储支持 OceanStor
    - 集群日志，支持 EFK
    - 集群健康评估（X-Pack）
    - F5 对接（X-Pack）
    - 支持登录验证码
    - 支持动态管理 Kubernetes 及组件版本
    - 自动模式支持自定义 cpu、内存规格

!!! summary "功能优化"
    - 集群创建支持指定网卡信息、helm版本
    - 支持添加、删除 namespace
    - 集群事件支持启用、禁用 npd
    - REST API 开启 rbac 认证
    - 支持 session 和 jwt 两种认证方式

## v3.2.0
------------------------
2020年10月10日

!!! info "支持 k8s 版本"
    支持的 k8s 版本是 1.18.6 和 1.18.8

!!! info "新增功能"
    - 新增消息中心（X-Pack）
    - 支持邮箱、钉钉、企业微信告警（X-Pack）
    - 支持实时查看任务返回日志
    - 应用商店新增 Redmine

!!! summary "功能优化"
    - 优化大规模 Kubernetes 集群创建、扩容任务
    - 升级 nginx 和 ingress-nginx 版本，解决 CVE-2020-12440 安全漏洞

## v3.1.1
------------------------
2020年09月16日

!!! info "支持 k8s 版本"
    支持的 k8s 版本是 1.18.6 和 1.18.8

!!! success "Bug 修复"
    - 修复了添加持久卷时无法选择 exists 的问题
    - 修复了 kubernetes 集群升级失败后状态未更新的问题
    - 修复了离线包中缺失 kube-bench 镜像导致 CIS 扫描失败的问题
    - 修复了部分部署机由于环境变量缺失导致 docker-compose 安装失败的问题

## v3.1.0
------------------------
2020年09月10日

!!! info "支持 k8s 版本"
    支持的 k8s 版本是 1.18.6 和 1.18.8

!!! info "新增功能"
    - CIS 安全扫描
    - 自定义 Logo 和系统名称（X-Pack）
    - LDAP 对接（X-Pack）
    - Kubernetes 版本管理
    - 查看集群事件

!!! summary "功能优化"
    - 集群 etcd 定时备份和自定义恢复
    - 优化安装升级脚本
    - 优化部分 API 接口

## v3.0.3
------------------------
2020年08月31日

!!! info "支持 k8s 版本"
    支持的 k8s 版本是 1.18.3 和 1.18.4

!!! summary "功能优化"
    优化安装升级脚本

!!! success "Bug 修复"
    - 修复了自动模式创建主机失败的问题
    - 修复了失败状态的集群无法删除的问题

## v3.0.2
------------------------
2020年08月24日

!!! info "支持 k8s 版本"
    支持的 k8s 版本是 1.18.3 和 1.18.4

!!! summary "功能优化"
    - 优化部分 API 接口
    - 优化主机定时任务
    - 优化上传 VMware 镜像逻辑

!!! success "Bug 修复"
    - 修复了 OpenStack 校验失败的问题
    - 修复了 RHEL 操作系统 rpm 包缺失的问题
    - 修复了初始化状态的可用区依然可以添加到部署计划的问题
    - 修复了集群节点重启后，rook ceph osd pod 启动失败的问题
    - 修复了集群删除节点后项目资源没有修改的问题

## v3.0.1
------------------------
2020年08月18日

!!! info "支持 k8s 版本"
    支持的 k8s 版本是 1.18.3 和 1.18.4

!!! summary "功能优化"
    - 开放 REST API
    - 已有集群导入

!!! success "Bug 修复"
    - 修复了 kubeoperator_nginx 容器没有正常启动的问题
    - 修复了集群恢复时还可以进行备份操作的问题

## v3.0.0
------------------------
2020年08月13日

!!! info "支持 k8s 版本"
    支持的 k8s 版本是 1.18.3 和 1.18.4

!!! info "新增功能"
    - Go 语言重写
    - 架构解耦和优化
    - 支持在线部署模式
    - 支持已有集群导入
    - 集成 kubeadm
    - 支持 ARM64 架构
    - 开放 REST API
    - 国际化支持
